<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>Imagens Coladas com Retângulos e HUD</title>
<style>
/* ... MANTÉM TODO O TEU CSS NORMAL ... */
html, body {
  margin: 0; padding: 0;
  width: 100vw; height: 100vh;
  background: #1a1817;
  overflow: hidden;
  box-sizing: border-box;
  font-family: 'Segoe UI', Arial, sans-serif;
}
body {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
}
/* ... restante do teu CSS ... */
.cartao-dir {
  width:270px;
  background: #101e30;
  display:flex;
  flex-direction:column;
  justify-content: center;
  align-items: stretch;
  gap: 27px;
  padding: 20px 0;
}
.cartao-dir button {
  display:none; /* Hide the original buttons - we'll use our flipped ones! */
}
/* ==== FLIP BUTTON 3D ANIMAÇÃO ==== */
.flip-btn {
  background: none;
  border: none;
  padding: 0;
  margin: 0 22px;
  cursor: pointer;
  width: auto;
  font: inherit;
  position: relative;
  perspective: 770px;
  height: 70px; min-width: 0;
  outline: none;
  display:block;
}

.flip-btn-inner {
  width: 100%;
  height: 70px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.55s cubic-bezier(.4,1.7,.5,1), box-shadow 0.15s;
  border-radius: 10px;
}

.flip-btn:focus .flip-btn-inner,
.flip-btn:hover .flip-btn-inner {
  transform: rotateX(90deg);
  box-shadow: 0 6px 22px #0c58ff33;
}
.flip-btn-front, .flip-btn-back {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0; top: 0;
  border-radius: 10px;
  font-size: 1.11em;
  font-family: 'Fira Mono', monospace;
  box-sizing: border-box;
  z-index: 1;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}
.flip-btn-front {
  background: #1a2e45;
  color: #e4f3ff;
  padding: 28px 0;
  letter-spacing: 1.2px;
  width: 100%;
  font-weight: normal;
  z-index: 2;
  user-select:none;
  pointer-events: none;
}
.flip-btn:hover .flip-btn-front,
.flip-btn:focus .flip-btn-front { color:#fff; background:#368df8; }
.flip-btn-back {
  background: #184080;
  color: #e3f2ff;
  transform: rotateX(90deg);
  padding-left: 17px;
  overflow: hidden;
  z-index: 3;
  font-size: 1em;
  box-shadow: 0 8px 25px #3758cc29 inset;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  white-space: pre-line;
  text-align: left;
}

.flip-btn-back ul, .flip-btn-back li {margin:0;padding:0;list-style:none;}
.flip-btn-back ul {display:flex; flex-direction: column; gap:8px; margin-left:0;}
.flip-btn-back .medalha-img { width: 33px; height: 33px; border-radius:6px; margin-right:10px; object-fit:cover;}
.flip-btn-back .medalha-label { font-weight:500; color:#fff;}
.flip-btn-back .lesoes-list {margin:0; padding-left:0;}
.flip-btn-back .lesoes-list li {margin-bottom:4px;}
.flip-btn-back .evento-img { width:45px;height:45px; margin-right:7px; border-radius:7px; object-fit:cover;box-shadow:0 2px 7px #0005;}
/* Responsivo */
@media (max-width:500px){
  .flip-btn, .flip-btn-inner {height:56px;}
  .flip-btn-front, .flip-btn-back {font-size:.98em;}
  .flip-btn-back .evento-img{width:33px;height:33px;}
}

/* Botão Fechar Modal como inicial! */
.cartao-fechar {
  position: absolute;
  top: 11px; right: 15px;
  background: none;
  border: none;
  font-size: 1.5em;
  color: #e9f8ff;
  font-weight: bold;
  cursor: pointer;
  border-radius: 5px;
  transition: background .15s;
  line-height: 1;
  z-index: 2;
}
.cartao-fechar:hover {
  background: #428cff33;
  color: #b02;
}
</style>
</head>
<body>
<div id="screen-fade"></div>

<div class="top-hud">
  <div class="hud-left">
    <span class="hud-time-date" id="hudTimeDate"></span>
    <button class="left-decor-btn" title="Voltar ao menu inicial" aria-label="Voltar ao menu inicial">
      <svg viewBox="0 0 24 24" fill="none" stroke="#42aaff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
        <path d="M3 11.5L12 4l9 7.5"/>
        <path d="M5 10v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8"/>
        <path d="M9 22V12h6v10"/>
      </svg>
    </button>
  </div>
  <div class="hud-center">
    <div class="profile-area" title="Meu Perfil" tabindex="0">
      <img src="Áreas (6).png" alt="Meu Perfil" class="profile-img" />
      <span class="profile-name">Luís Correia</span>
    </div>
  </div>
  <div class="hud-right"></div>
</div>
<div class="conteudo-wrapper">
  <div class="sala-imagens" role="list">
    <img src="ab13e542-fc6d-4634-9cd1-8e8dd6b08065.png" alt="imagem 1" role="listitem" tabindex="-1">
    <div class="separador" aria-hidden="true"></div>
    <img src="cmb.png" alt="imagem 2" onclick="abrirCartao(2)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="ANA.png" alt="imagem 3" onclick="abrirCartao(3)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="SFUAP.png" alt="imagem 4" onclick="abrirCartao(4)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="CIRL.png" alt="imagem 5" onclick="abrirCartao(5)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="any.png" alt="imagem 6" onclick="abrirCartao(6)" role="listitem" tabindex="0">
  </div>
</div>

<script>
// --- HUD e imagens (mantém tudo igual) ---
function updateHudTime() {
  const el = document.getElementById('hudTimeDate');
  if (!el) return;
  const now = new Date();
  el.textContent = now.toLocaleDateString('pt-PT', { day: '2-digit', month: '2-digit' }) +
  ' ' + now.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
}
setInterval(updateHudTime, 1000);
updateHudTime();
document.querySelector('.left-decor-btn').addEventListener('click', () => {
  window.location.href = 'desporto.html';
});
document.querySelectorAll('.sala-imagens img[onclick]').forEach(function(img) {
  let dica;
  img.addEventListener('mouseenter', function(e) {
    dica = document.createElement('div');
    dica.className = 'dica-msg';
    dica.textContent = 'Clica para ver o cartão!';
    const sala = document.querySelector('.sala-imagens');
    const imgRect = img.getBoundingClientRect();
    const salaRect = sala.getBoundingClientRect();
    dica.style.top = (imgRect.top - salaRect.top + 22) + 'px';
    dica.style.left = (imgRect.left - salaRect.left + imgRect.width/2) + 'px';
    sala.appendChild(dica);
  });
  img.addEventListener('mouseleave', function(e) {
    if (dica && dica.parentNode) dica.parentNode.removeChild(dica);
    dica = null;
  });
  img.addEventListener('keydown', function(e) {
    if(e.key === "Enter" || e.key === " ") {
      abrirCartao(parseInt(e.target.getAttribute('onclick')?.match(/\d+/)?.[0]));
    }
  });
});
const pins3 = [
  { top: 28, left: 60, nome: "Piscina A", local: "Lisboa", imagem: "piscinaa.jpg" },
  { top: 47, left: 30, nome: "Piscina B", local: "Porto", imagem: "piscinab.jpg" },
  { top: 63, left: 75, nome: "Piscina C", local: "Faro", imagem: "piscinac.jpg" }
];
const pins4 = [
  { top: 47, left: 50.5, nome: "Piscina D", local: "Madrid - ESP", imagem: "piscinad.jpg" },
  { top: 46, left: 14, nome: "Piscina E", local: "Ponta Delgada - PT (Açores)", imagem: "piscinae.jpg" },
  { top: 75, left: 25.1, nome: "Piscina F", local: "Albufeira - PT", imagem: "piscinaf.jpg" },
  { top: 40, left: 26, nome: "Piscina 4", local: "Felgueiras - PT", imagem: "piscina4.jpg" },
  { top: 41, left: 23, nome: "Piscina 5", local: "Porto - PT", imagem: "piscina5.jpg" },
  { top: 68, left: 22, nome: "Piscina 6", local: "Sines - PT", imagem: "piscina6.jpg" },
  { top: 63.5, left: 22.5, nome: "Piscina 7", local: "Setúbal - PT", imagem: "piscina7.jpg" },
  { top: 49.6, left: 25, nome: "Piscina 8", local: "Condeixa-a-Nova - PT", imagem: "piscina8.jpg" },
  { top: 55, left: 26.8, nome: "Piscina 9", local: "Abrantes", imagem: "piscina9.jpg" },
  { top: 59, left: 24.3, nome: "Piscina 10", local: "Coruche - PT", imagem: "piscina10.jpg" },
  { top: 59, left: 22.3, nome: "Piscina 11", local: "Vila Franca de Xira - PT", imagem: "piscina11.jpg" },
  { top: 59.9, left: 21, nome: "Piscina 12", local: "Sto. António dos Cavaleiros - PT", imagem: "piscina12.jpg" },
  { top: 63.3, left: 21, nome: "Piscina 13", local: "Cova da Piedade - PT", imagem: "piscina13.jpg" },
  { top: 61.9, left: 19.2, nome: "Piscina 14", local: "Oeiras(jamor) - PT", imagem: "piscina14.jpg" },
  { top: 61.9, left: 20.9, nome: "Piscina 15", local: "Algés- PT", imagem: "piscina15.jpg" }
];
const conteudosCartao = {
  2: getCartaoModal('cmbcart-removebg-preview.png', 'mapacmb.png', []),
  3: getCartaoModal('anacart-removebg-preview.png', 'mapaanac.png', []),
  4: getCartaoModal('sfuapcart-removebg-preview.png', 'crcr-removebg-preview.png', pins4),
  5: getCartaoModal('cirlcart-removebg-preview.png', 'mapacirl.png', []),
  6: getCartaoModal('anycart-removebg-preview.png', 'mapaany.png', [])
};

function getCartaoModal(imagemEsq, imagemMapa, pins = []) {
  return `
    <div class="cartao-conteudo-flex">
      <div class="cartao-esq">
        <img src="${imagemEsq}" alt="Cartão">
      </div>
      <div class="cartao-centro">
        <div class="mapa-centro-rel">
          <img src="${imagemMapa}" alt="Mapa Portugal">
          ${pins.map(pin =>
            `<div class="pin-mapa" style="top:${pin.top}%;left:${pin.left}%;" onclick="mostrarInfoPin(event, '${pin.nome}', '${pin.local}', '${pin.imagem}')"></div>`
          ).join('')}
          <div id="pin-popup"></div>
        </div>
      </div>
      <div class="cartao-dir" id="cartaoDirEscolhe">
        <button class="flip-btn" tabindex="0">
          <span class="flip-btn-inner">
            <span class="flip-btn-front">Medalhas</span>
            <span class="flip-btn-back">
              <ul>
                <li><img src="med1.jpg" class="medalha-img" alt="Ouro"><span class="medalha-label">Ouro Natação</span></li>
                <li><img src="med2.jpg" class="medalha-img" alt="Prata"><span class="medalha-label">Prata Atletismo</span></li>
                <li><img src="med3.jpg" class="medalha-img" alt="Bronze"><span class="medalha-label">Bronze Basquetebol</span></li>
              </ul>
            </span>
          </span>
        </button>
        <button class="flip-btn" tabindex="0">
          <span class="flip-btn-inner">
            <span class="flip-btn-front">lesoes</span>
            <span class="flip-btn-back">
              <ul class="lesoes-list">
                <li>Tornozelo torcido em 2022</li>
                <li>Luxação no ombro em 2023</li>
                <li>Lesão lombar ligeira</li>
              </ul>
            </span>
          </span>
        </button>
        <button class="flip-btn" tabindex="0">
          <span class="flip-btn-inner">
            <span class="flip-btn-front">eventos</span>
            <span class="flip-btn-back">
              <img src="evento1.jpg" class="evento-img" alt="Evento1">
              <img src="evento2.jpg" class="evento-img" alt="Evento2">
              <img src="evento3.jpg" class="evento-img" alt="Evento3">
            </span>
          </span>
        </button>
      </div>
    </div>
  `;
}



// -- Modal aberto --
function abrirCartao(idx) {
  const conteudo = conteudosCartao[idx] || "";
  const bg = document.createElement('div');
  bg.className = 'cartao-modal-bg';
  bg.setAttribute('tabindex', '-1');
  bg.onclick = function(e){
    if (e.target === bg) fecharCartao(bg);
  };
  const box = document.createElement('div');
  box.className = 'cartao-modal';
  box.tabIndex = 0;
  box.innerHTML = conteudo +
    `<button class="cartao-fechar" title="Fechar" aria-label="Fechar" onclick="fecharCartaoModal(event)">✕</button>`;
  bg.appendChild(box);
  document.body.appendChild(bg);
  requestAnimationFrame(() => {
    bg.classList.add('show');
    box.focus();
  });
}
function fecharCartao(bg) {
  if (!bg) return;
  bg.classList.remove('show');
  bg.addEventListener('transitionend', function handler() {
    if (bg.parentNode) bg.parentNode.removeChild(bg);
    bg.removeEventListener('transitionend', handler);
  });
}
function fecharCartaoModal(e) {
  e.stopPropagation();
  const modalBg = e.target.closest('.cartao-modal-bg');
  fecharCartao(modalBg);
}
window.mostrarInfoPin = function (e, nome, local, imagem) {
  e.stopPropagation();
  const popup = document.querySelector("#pin-popup");
  popup.innerHTML = `<strong>${nome}</strong><br>${local}<br>${imagem ? `<img src="${imagem}" alt="${nome}">` : ''}`;
  popup.style.display = "block";
  const parent = e.target.parentElement;
  const parentRect = parent.getBoundingClientRect();
  const pinRect = e.target.getBoundingClientRect();
  const y = pinRect.top - parentRect.top + 40;
  const x = pinRect.left - parentRect.left + 26;
  popup.style.top = y + "px";
  popup.style.left = x + "px";
  popup.style.pointerEvents = 'auto';
  setTimeout(() => {
    window.addEventListener('mousedown', esconderPopup, { once: true });
  }, 0);
}
function esconderPopup(e) {
  const popup = document.querySelector("#pin-popup");
  if (popup) popup.style.display = "none";
}
window.addEventListener('load', () => {
  const screenFade = document.getElementById('screen-fade');
  if (!screenFade) return;
  setTimeout(() => {
    screenFade.style.opacity = '0';
  }, 100);
  screenFade.addEventListener('transitionend', () => {
    screenFade.remove();
  });
});
</script>
</body>
</html>
