<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>Imagens Coladas com Retângulos e HUD</title>
<style>
html, body {
  margin: 0; padding: 0;
  width: 100vw; height: 100vh;
  background: #1a1817;
  overflow: hidden;
  box-sizing: border-box;
  font-family: 'Segoe UI', Arial, sans-serif;
}
body {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
}
.top-hud {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 58px;
  background: rgba(18,26,36,0.93);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 32px;
  z-index: 9999;
  border-bottom: 2.5px solid #42aaff;
  box-shadow: 0 2px 18px #12244477;
  user-select: none;
}
.hud-left { display: flex; align-items: center; gap: 18px; }
.hud-time-date {
  color: #e9f5fa; font-size: 1.07em; letter-spacing: .1px; font-variant-numeric: tabular-nums;
  font-family: 'Segoe UI Mono', monospace;
  min-width: 115px; text-align: left; text-shadow: 1px 1px 2px #06060848;
  user-select: text;
}
.left-decor-btn {
  width: 44px; height: 44px; border-radius: 9px; margin-left: 18px;
  border: 2.5px solid #42aaff;
  box-shadow: 0 2px 10px #45baff88;
  background: none;
  display: inline-flex; align-items: center; justify-content: center; cursor: pointer;
  transition: background-color 0.2s ease;
}
.left-decor-btn svg { width: 20px; height: 20px; }
.left-decor-btn:hover {
  background: #428cff22;
}
.hud-center { flex: 1; display: flex; justify-content: flex-end; margin-left: auto; margin-right: 80px; }
.profile-area {
  display: flex; align-items: center; gap: 11px;
  background: rgba(42,62,94,0.82); border-radius: 9px;
  padding: 5px 55px 5px 55px;
  box-shadow: 0 1px 6px #006fff21, 0 2px 8px #121a2412;
  cursor: pointer; border: 1.5px solid #42aaff60;
  min-width: 0; max-width: 260px;
  user-select: none;
}
.profile-img {
  width: 38px; height: 38px; border-radius: 7px; object-fit: cover;
  border: 2.5px solid #42aaff;
  box-shadow: 0 2px 12px #0a79e058; background: #202a41;
}
.profile-name {
  color: #f3f8fc; font-weight: 600; font-size: 1em;
  max-width: 120px; overflow: hidden;
  text-overflow: ellipsis; white-space: nowrap;
  user-select: text;
}
.conteudo-wrapper {
  position: relative;
  flex: 1 1 auto;
  margin-top: 58px;
  width: 100vw;
  height: calc(100vh - 58px);
  display: flex;
  overflow: hidden;
}
.sala-imagens {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  width: 100%;
  height: 100%;
  font-size: 0;
  position: relative;
}
.sala-imagens img {
  flex: 1 1 0;
  width: 0;
  height: 100%;
  object-fit: cover;
  display: block;
  margin: 0; border: none; padding: 0;
  box-shadow: none;
  min-width: 0; min-height: 0;
}
.separador {
  width: 3mm;
  min-width: 3mm;
  height: 100%;
  background: #878677;
  display: block;
  border: none;
  margin: 0; padding: 0;
  flex: 0 0 3mm;
}
@media (max-width:900px) {
  .sala-imagens { flex-direction: column; height: 100%; width: 100%; }
  .sala-imagens img, .separador {
    width: 100vw !important; max-width: 100vw;
    height: auto;
  }
  .separador {
    height: 3mm; max-height: 3mm; min-height: 3mm; width: 100vw;
  }
}
.sala-imagens img[onclick] {
  cursor: pointer;
  transition: box-shadow 0.15s, transform 0.15s;
}
.sala-imagens img[onclick]:hover {
  box-shadow: 0 0 20px #ffd70088, 0 0 0 2.5px #ffd700dd;
  transform: translateY(-4px) scale(1.035);
  outline: 0;
}
.dica-msg {
  position: absolute;
  left: 50%; top: 28px;
  background: #fff8ce;
  color: #473c08;
  font-weight: bold;
  padding: 8px 17px;
  border-radius: 13px;
  font-size: 1.05em;
  box-shadow: 0 2px 10px #0003;
  opacity: 0.96;
  pointer-events: none;
  z-index: 30;
  transform: translateX(-50%);
  transition: opacity 0.17s, top 0.17s;
  animation: piscarDica 1.6s infinite alternate;
  white-space: nowrap;
}
@keyframes piscarDica { 0%{opacity:1;} 100%{opacity:.5;} }

#screen-fade {
  position: fixed;
  top: 0; left: 0; width: 100vw; height: 100vh;
  background: black;
  opacity: 1;
  pointer-events: none;
  transition: opacity 0.8s ease-out;
  z-index: 10000;
}
/* Modal */
.cartao-modal-bg {
  position: fixed;
  inset: 0;
  background: rgba(12,13,20,0.67);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}
.cartao-modal-bg.show {
  opacity: 1;
  pointer-events: auto;
}
.cartao-modal {
  width: 1100px;
  height: 520px;
  background: linear-gradient(135deg, #2346a5 60%, #0b101c 100%);
  border: 2.5px solid #2efaff60;
  box-shadow: 0 7px 32px #0008, 0 2px 0 #ccecff44 inset, 0 0 22px #227aff77;
  border-radius: 0;
  overflow: hidden;
  position: relative;
  font-family: 'Segoe UI', Arial, sans-serif;
  display: flex;
  align-items: stretch;
  justify-content: flex-start;
  padding: 0;
}
.cartao-conteudo-flex {
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 100%;
}
.cartao-esq {
  width: 240px;
  background: #101c33;
  display: flex;
  align-items: center;
  justify-content: center;
}
.cartao-esq img {
  width: 95%;
  margin-left: 3px;
}
.cartao-centro {
  flex:1;
  background: #7ed5fc;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#13394e;
  font-size:1.35em;
  font-family: monospace;
  text-align: center;
  padding: 0 !important;
}
/* Centro do mapa, posição relativa para os pins */
.mapa-centro-rel {
  position: relative;
  width: 98%;
  height: 96%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.mapa-centro-rel img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 7px;
}
/* PIN vermelhos sobre o mapa */
.pin-mapa {
  position: absolute;
  width: 27px;
  height: 27px;
  background: #ff2222;
  border: 3px solid #fff;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 9px 2px #a00d;
  transform: translate(-50%,-50%);
  z-index: 2;
  transition: box-shadow 0.12s;
}
.pin-mapa:hover {
  box-shadow: 0 0 15px 4px #ff5252bb;
  background: #ff5252;
}
/* Popup de info dos pins */
#pin-popup {
  position: absolute;
  min-width: 180px;
  background: #fff;
  color: #222f;
  border-radius: 12px;
  border: 2.5px solid #289affbb;
  box-shadow: 0 6px 24px #2238;
  padding: 12px 15px 14px 15px;
  font-size: 1.07em;
  left: 0;
  top: 0;
  z-index: 10;
  display: none;
  pointer-events: none;
}
#pin-popup img {
  display: block;
  margin: 6px auto 2px auto;
  max-width: 115px;
  max-height: 62px;
  border-radius: 7px;
}
.cartao-dir {
  width:270px;
  background: #101e30;
  display:flex;
  flex-direction:column;
  justify-content: center;
  align-items: stretch;
  gap: 27px;
  padding: 20px 0;
}
.cartao-dir button {
  background:#1a2e45;
  border:none;
  color:#e4f3ff;
  font-size:1.11em;
  font-family: 'Fira Mono', monospace;
  border-radius:10px;
  padding: 28px 0;
  margin: 0 22px;
  letter-spacing: 1.2px;
  cursor:pointer;
  transition: background .15s, color .15s;
}
.cartao-dir button:hover {
  background: #368df8;
  color: #fff;
}
.cartao-fechar {
  position: absolute;
  top: 11px; right: 15px;
  background: none;
  border: none;
  font-size: 1.5em;
  color: #e9f8ff;
  font-weight: bold;
  cursor: pointer;
  border-radius: 5px;
  transition: background .15s;
  line-height: 1;
  z-index: 2;
}
.cartao-fechar:hover {
  background: #428cff33;
  color: #b02;
}
</style>
</head>
<body>
<div id="screen-fade"></div>

<div class="top-hud">
  <div class="hud-left">
    <span class="hud-time-date" id="hudTimeDate"></span>
    <button class="left-decor-btn" title="Voltar ao menu inicial" aria-label="Voltar ao menu inicial">
      <svg viewBox="0 0 24 24" fill="none" stroke="#42aaff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" focusable="false">
        <path d="M3 11.5L12 4l9 7.5"/>
        <path d="M5 10v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8"/>
        <path d="M9 22V12h6v10"/>
      </svg>
    </button>
  </div>
  <div class="hud-center">
    <div class="profile-area" title="Meu Perfil" tabindex="0">
      <img src="Áreas (6).png" alt="Meu Perfil" class="profile-img" />
      <span class="profile-name">Luís Correia</span>
    </div>
  </div>
  <div class="hud-right"></div>
</div>
<div class="conteudo-wrapper">
  <div class="sala-imagens" role="list">
    <img src="ab13e542-fc6d-4634-9cd1-8e8dd6b08065.png" alt="imagem 1" role="listitem" tabindex="-1">
    <div class="separador" aria-hidden="true"></div>
    <img src="cmb.png" alt="imagem 2" onclick="abrirCartao(2)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="ANA.png" alt="imagem 3" onclick="abrirCartao(3)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="SFUAP.png" alt="imagem 4" onclick="abrirCartao(4)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="CIRL.png" alt="imagem 5" onclick="abrirCartao(5)" role="listitem" tabindex="0">
    <div class="separador" aria-hidden="true"></div>
    <img src="any.png" alt="imagem 6" onclick="abrirCartao(6)" role="listitem" tabindex="0">
  </div>
</div>

<script>
// --- HUD e imagens (mantém tudo igual) ---
function updateHudTime() {
  const el = document.getElementById('hudTimeDate');
  if (!el) return;
  const now = new Date();
  el.textContent = now.toLocaleDateString('pt-PT', { day: '2-digit', month: '2-digit' }) +
  ' ' + now.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
}
setInterval(updateHudTime, 1000);
updateHudTime();
document.querySelector('.left-decor-btn').addEventListener('click', () => {
  window.location.href = 'desporto.html';
});
document.querySelectorAll('.sala-imagens img[onclick]').forEach(function(img) {
  let dica;
  img.addEventListener('mouseenter', function(e) {
    dica = document.createElement('div');
    dica.className = 'dica-msg';
    dica.textContent = 'Clica para ver o cartão!';
    const sala = document.querySelector('.sala-imagens');
    const imgRect = img.getBoundingClientRect();
    const salaRect = sala.getBoundingClientRect();
    dica.style.top = (imgRect.top - salaRect.top + 22) + 'px';
    dica.style.left = (imgRect.left - salaRect.left + imgRect.width/2) + 'px';
    sala.appendChild(dica);
  });
  img.addEventListener('mouseleave', function(e) {
    if (dica && dica.parentNode) dica.parentNode.removeChild(dica);
    dica = null;
  });
  img.addEventListener('keydown', function(e) {
    if(e.key === "Enter" || e.key === " ") {
      abrirCartao(parseInt(e.target.getAttribute('onclick')?.match(/\d+/)?.[0]));
    }
  });
});

// -- DEFINE PINS PARA O CARTÃO 3 --
const pins3 = [
  // Ajusta top/left (%) à posição dos pins do teu mapa. Adiciona tantos quantos precise.
  { top: 28, left: 60, nome: "Piscina A", local: "Lisboa", imagem: "piscinaa.jpg" },
  { top: 47, left: 30, nome: "Piscina B", local: "Porto", imagem: "piscinab.jpg" },
  { top: 63, left: 75, nome: "Piscina C", local: "Faro", imagem: "piscinac.jpg" }
];

// -- Construção dos cartões --
const conteudosCartao = {
  2: getCartaoModal('cmbcart-removebg-preview.png', 'mapacmb.png', []),
  3: getCartaoModal('anacart-removebg-preview.png', 'mapaanac.png', pins3),
  4: getCartaoModal('sfuapcart-removebg-preview.png', 'crcr-removebg-preview.png', []),
  5: getCartaoModal('cirlcart-removebg-preview.png', 'mapacirl.png', []),
  6: getCartaoModal('anycart-removebg-preview.png', 'mapaany.png', [])
};

// Função para gerar o cartão. O centro é relative, os pins são absolutos em percentagem.
function getCartaoModal(imagemEsq, imagemMapa, pins = []) {
  return `
    <div class="cartao-conteudo-flex">
      <div class="cartao-esq">
        <img src="${imagemEsq}" alt="Cartão">
      </div>
      <div class="cartao-centro">
        <div class="mapa-centro-rel">
          <img src="${imagemMapa}" alt="Mapa Portugal">
          ${pins.map(pin =>
            `<div class="pin-mapa" style="top:${pin.top}%;left:${pin.left}%;" onclick="mostrarInfoPin(event, '${pin.nome}', '${pin.local}', '${pin.imagem}')"></div>`
          ).join('')}
          <div id="pin-popup"></div>
        </div>
      </div>
      <div class="cartao-dir">
        <button>Medalhas</button>
        <button>lesoes</button>
        <button>eventos</button>
      </div>
    </div>
  `;
}

// -- Modal aberto --
function abrirCartao(idx) {
  const conteudo = conteudosCartao[idx] || "";
  const bg = document.createElement('div');
  bg.className = 'cartao-modal-bg';
  bg.setAttribute('tabindex', '-1');
  bg.onclick = function(e){
    if (e.target === bg) fecharCartao(bg);
  };
  const box = document.createElement('div');
  box.className = 'cartao-modal';
  box.tabIndex = 0;
  box.innerHTML = conteudo +
    `<button class="cartao-fechar" title="Fechar" aria-label="Fechar" onclick="fecharCartaoModal(event)">✕</button>`;
  bg.appendChild(box);
  document.body.appendChild(bg);

  requestAnimationFrame(() => {
    bg.classList.add('show');
    box.focus();
  });
}

// -- Fechar modal --
function fecharCartao(bg) {
  if (!bg) return;
  bg.classList.remove('show');
  bg.addEventListener('transitionend', function handler() {
    if (bg.parentNode) bg.parentNode.removeChild(bg);
    bg.removeEventListener('transitionend', handler);
  });
}
function fecharCartaoModal(e) {
  e.stopPropagation();
  const modalBg = e.target.closest('.cartao-modal-bg');
  fecharCartao(modalBg);
}

// Popup info dos pins: mostra nome, local, imagem
window.mostrarInfoPin = function (e, nome, local, imagem) {
  e.stopPropagation();
  const popup = document.querySelector("#pin-popup");
  popup.innerHTML = `<strong>${nome}</strong><br>${local}<br>${imagem ? `<img src="${imagem}" alt="${nome}">` : ''}`;
  popup.style.display = "block";
  // Posição relativa ao pin
  const parent = e.target.parentElement;
  const parentRect = parent.getBoundingClientRect();
  const pinRect = e.target.getBoundingClientRect();
  const y = pinRect.top - parentRect.top + 40;
  const x = pinRect.left - parentRect.left + 26;
  popup.style.top = y + "px";
  popup.style.left = x + "px";
  popup.style.pointerEvents = 'auto';
  // Esconde popup ao clicar fora
  setTimeout(() => {
    window.addEventListener('mousedown', esconderPopup, { once: true });
  }, 0);
}
function esconderPopup(e) {
  const popup = document.querySelector("#pin-popup");
  if (popup) popup.style.display = "none";
}

// -- Fade inicial --
window.addEventListener('load', () => {
  const screenFade = document.getElementById('screen-fade');
  if (!screenFade) return;
  setTimeout(() => {
    screenFade.style.opacity = '0';
  }, 100);
  screenFade.addEventListener('transitionend', () => {
    screenFade.remove();
  });
});
</script>
</body>
</html>
