<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8" />
<title>Troféus – Luís Correia</title>
<style>
html, body { width:100vw; height:100vh; margin:0; padding:0; overflow:hidden;}
body {
  background: #28345A;
  font-family: 'Segoe UI', Arial, sans-serif;
  min-height:100vh; display:flex; flex-direction:column; padding-top:60px;
}
.top-hud {
  position: fixed; top:0; left:0; width:100vw; height:58px; background:rgba(18,26,36,0.93);
  display:flex; align-items:center; justify-content:space-between; padding:0 32px; z-index:9999; border-bottom:2.5px solid #42aaff; box-shadow:0 2px 18px #12244477;
}
.hud-left{display:flex;align-items:center;gap:18px;}
.hud-time-date{
  color:#e9f5fa; font-size:1.07em; letter-spacing:.1px; font-variant-numeric:tabular-nums; font-family:'Segoe UI Mono', monospace;
  min-width:115px; text-align:left; text-shadow:1px 1px 2px #06060848;
}
.left-decor-btn{
  width:44px; height:44px; border-radius:9px; margin-left:18px;
  border:2.5px solid #42aaff; box-shadow:0 2px 10px #45baff88;
  background:none;
  display:inline-flex; align-items:center; justify-content:center; cursor:pointer;
  transition: box-shadow 0.16s, filter 0.13s;
}
.left-decor-btn:hover, .left-decor-btn:focus { filter:brightness(1.09); box-shadow:0 0 12px #42aaff77, 0 2px 10px #45baff88;}
.left-decor-btn svg { width:20px; height:20px; }
.hud-center{flex:1; display:flex; justify-content:flex-end; margin-left:auto; margin-right:80px;}
.profile-area{
  display:flex; align-items:center; gap:11px; background:rgba(42,62,94,0.82); border-radius:9px; padding:5px 55px 5px 55px;
  box-shadow:0 1px 6px #006fff21, 0 2px 8px #121a2412; cursor:pointer; border:1.5px solid #42aaff60; min-width:0; max-width:260px;
}
.profile-img { width:38px; height:38px; border-radius:7px; object-fit:cover; border:2.5px solid #42aaff; box-shadow:0 2px 12px #0a79e058; background:#202a41;}
.profile-name { color:#f3f8fc; font-weight:600; font-size:1em; max-width:120px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.trofeus-container {
  width:100vw;
  max-width:1200px;
  margin:90px auto 0 auto;
  padding:36px 24px 32px 24px;
  background:rgba(24,32,50,0.91);
  border-radius:14px;
  box-shadow:0 10px 40px #121a2466;
  display:flex; flex-direction:column; gap:32px; align-items:center;
}
.trofeus-header {
  display:flex; align-items:flex-start; gap:36px; width:100%; justify-content:space-between; margin-bottom:12px;
}
.trofeus-title { color: #fff; font-size:2em; font-weight:800; letter-spacing:1px; display:flex; align-items:center; gap:12px;}
.contador-trofeus{color:#ffffffd9; background:#1462a7; font-size:1.1em; border-radius:10px; padding:8px 22px; font-weight:600; box-shadow:0 1px 7px #2468b988; letter-spacing:0.8px; display:flex; gap:10px; align-items:center;}

/* BUSCA */
.trofeu-busca-wrap { display:flex; align-items:center; width:100%; max-width:430px; margin:0 auto 8px auto; position:relative;}
.trofeu-busca-input {
  width:100%; font-size:1.13em; background: #212e43; color:#f7faff; border-radius:9px; border:2px solid #42aaff70;
  padding:13px 46px 13px 15px; outline: none; box-shadow:0 1.5px 8px #21006f18 inset, 0 0.5px 1.5px #20bafe11;
  transition: border 0.14s;
}
.trofeu-busca-input:focus { border:2px solid #42aaff; background:#202b3f;}
.trofeu-busca-icone {
  position:absolute; right:15px; font-size:1.35em; color:#42aaff; pointer-events:none; top:7px;
  display:flex; align-items:center; height:26px; opacity:.8;
}

/* FILTRO visual */
.trofeus-filtros {
  margin:0 0 20px 0; display:flex; flex-wrap:wrap; gap:14px 18px; align-items:center; justify-content:center;
  background:rgba(36,55,100,0.62); border-radius:13px; padding:13px 19px 7px 19px; box-shadow:0 2px 16px #2a3b5a36;
}
.trofeu-toggle {
  display: inline-flex; align-items: center; cursor: pointer; position:relative; margin:0 9px 8px 0; font-family:inherit; font-size:1.01em;
}
.trofeu-toggle input[type="checkbox"] { display: none;}
.trofeu-toggle .filtro-visu { min-width:36px; min-height:36px; padding:0 13px; border-radius:8px; border:2px solid #345693;
  background:rgba(44,74,150,0.21); color:#dbedff; display:flex; align-items:center; justify-content:center;
  transition:all 0.15s cubic-bezier(.55,.15,.25,1); position:relative; font-weight:600; letter-spacing:0.3px;
  box-shadow:0 2px 6px #0587c320, 0 1px 3px #1d233911;
}
.trofeu-toggle input[type="checkbox"]:checked + .filtro-visu {
  background: linear-gradient(90deg,#42aaffcc 30%,#265ccf 100%);
  color:#fff; border-color:#42aaff;
  box-shadow:0 0 0 2.5px #20bafe44; filter: brightness(1.11);
}
.trofeu-toggle .icon {display:inline-block;width:19px; height:19px; margin-right:7px; margin-bottom:-2px;vertical-align:middle;}
.trofeu-toggle[data-cor="ouro"] .icon { filter: drop-shadow(0 2px 3px #FFD70055);}
.trofeu-toggle[data-cor="prata"] .icon { filter: drop-shadow(0 1px 2px #AAA);}
.trofeu-toggle[data-cor="bronze"] .icon { filter: drop-shadow(0 1.5px 3px #cd7f3230);}
.trofeu-toggle[data-cor="lendario"] .icon { filter: drop-shadow(0 2px 6px #4db6ff99);}
.trofeu-toggle[data-cor="oculto"] .icon { filter: grayscale(1) brightness(0.55); }

.trofeus-ordenar-wrap {
  margin-left:22px;display:flex;align-items:center;gap:16px;
}
.trofeu-ordenar-select {
  background:#182846;color:#fff;border:1.8px solid #42aaff88;padding:6.5px 10px 6.5px 9px;
  border-radius:6px;font-size:1.02em;
}

.trofeu-vazio-msg {
  color:#fff; background:#2658c1e0; border-radius:9px; padding:23px 36px; font-size:1.13em; font-weight:600;
  margin:18px auto 19px auto; text-align:center; box-shadow:0 2px 14px #14295a55;
  letter-spacing:0.41px; display:none;
}

.trofeu-lista {
  display: flex;
  flex-wrap: wrap;
  overflow-x: hidden;
  overflow-y: auto;
  gap: 34px;
  justify-content:flex-start;
  align-items:flex-start;
  width: 100%;
  min-height:200px;
  max-height:360px;
}
.trofeu-card.trofeu-lendario { z-index:50; position:relative; }
.trofeu-card          { width:160px; background:rgba(32,45,70,0.94); border-radius:10px; box-shadow:0 4px 22px #043f5f40; display:flex; flex-direction:column; align-items:center; padding:19px 10px 14px 10px; position:relative; border:2px solid #225099; transition:transform 0.19s cubic-bezier(.5,1,.8,1), box-shadow 0.19s;}
.trofeu-card.selected { border-color:#42aaff; box-shadow:0 0 15px #43b2ffb4, 0 4px 28px #123;}
.trofeu-card:focus { outline:2px solid #42aaff;}
.trofeu-card:hover{transform:scale(1.06); box-shadow:0 2px 18px #29a7f985, 0 8px 22px #14204380; border-color:#42aaff;}
.trofeu-card[hidden] { display:none !important; }
.trofeu-icone { width:60px; height:75px; margin-bottom:14px; display:flex; align-items:center; justify-content:center;}
.trofeu-icone svg{width:100%;height:100%;}
.trofeu-nome {color:#fff; font-size:1.04em; font-weight:700; text-align:center;}
.trofeu-data{color:#b5caf8;font-size:.98em;margin-top:4px;text-align:center;}
.trofeu-desc{color:#c7e7fe;font-size:.92em;margin-top:11px;margin-bottom:0;text-align:center;line-height:1.25em;}
.trofeu-card.novo {
  animation:highlightGlow 1.18s cubic-bezier(.43,.8,.16,1.16) 1;
  box-shadow:0 0px 24px #42aaff88, 0 4px 38px #12005840;
  border-color: #ffd700;
  position:relative;
}
.trofeu-card.novo:after {
  content: "Novo!";
  position: absolute; top:9px; left:9px; background:#f9d675; color:#175ab0; border-radius:6px; font-size:.85em; font-weight:800; padding:2px 14px 2px 12px; box-shadow:0 2px 6px #fffaaa99;
  letter-spacing:1px; border:1px solid #d9b53e;
  animation:popBadge .65s cubic-bezier(.4,1.6,.22,1.18) 1;
}
@keyframes highlightGlow {
  0% {box-shadow:0 0 0 #fff,0 0 0 #fff; border-color:#42aaff;}
  30% {box-shadow:0 3px 40px #ffd700ee, 0 4px 38px #12005845; border-color:#ffd700;}
  80% {box-shadow:0 2px 22px #42aaffaa, 0 6px 20px #5438b3cc; border-color:#ffd700;}
  100% {box-shadow:0 0 0 #42aaff, 0 2px 18px #0adfff45; border-color:#ffd700;}
}
@keyframes popBadge {
  0% {transform:scale(0.5);}
  70% {transform:scale(1.13);}
  100% {transform:scale(1);}
}

.trofeu-oculto{filter:grayscale(1) brightness(0.55);opacity:0.73;border-color:#222c45;}
.trofeu-oculto .trofeu-nome{color:#7593be;}
.trofeu-oculto .trofeu-desc{color:#7786ae;}
.trofeu-modal-bg{
  position:fixed;z-index:20000;left:0;top:0;width:100vw;height:100vh;
  background:rgba(12,18,30,0.92);display:flex;align-items:center;justify-content:center;animation:fadeInBG 0.25s;
}
@keyframes fadeInBG { from{opacity:0;} to{opacity:1;} }
.trofeu-modal-card{
  position:relative;min-width:330px;max-width:98vw;min-height:425px;max-height:93vh;
  background:rgba(24,32,55,0.97);border-radius:17px;box-shadow:0 8px 58px #0076fc52, 0 18px 50px #0008;
  padding:38px 34px 32px 34px;display:flex;flex-direction:column;align-items:center;justify-content:center;
  transform:scale(0.93) rotateY(95deg);opacity:0;animation:flipIn 0.49s cubic-bezier(.2,.7,.7,1.2) forwards;
}
@keyframes flipIn {
  0% { transform:scale(0.93) rotateY(95deg); opacity:0;}
  60%{ transform:scale(1.1) rotateY(-10deg); opacity:1;}
  85%{ transform:scale(1.05) rotateY(2deg);}
  100%{ transform:scale(1.03) rotateY(0deg); opacity:1;}
}
.trofeu-modal-card img{width:98px;height:98px;border-radius:13px;object-fit:cover;margin-bottom:18px;box-shadow:0 2px 12px #7bb0fd86;}
.trofeu-modal-card .trofeu-modal-title{color:#fff;font-size:1.37em;font-weight:700;margin-bottom:10px;}
.trofeu-modal-card .trofeu-modal-desc{color:#c0eaff;font-size:1em;font-weight:500;text-align:center;}
.trofeu-modal-close{position:absolute;top:14px;right:20px;font-size:2.2em;font-family:Arial,sans-serif;background:none;border:none;color:#acedff;cursor:pointer;font-weight:900;line-height:1;z-index:2;filter:drop-shadow(0 0 5px #29a7f933);transition:color 0.12s;}
.trofeu-modal-close:hover{color:#fff;}
</style>
</head>
<body>
<div class="top-hud">
  <div class="hud-left">
    <span class="hud-time-date" id="hudTimeDate"></span>
    <button class="left-decor-btn" title="Voltar ao menu inicial" onclick="location.href='index.html'" style="background:none;">
      <svg viewBox="0 0 24 24" fill="none" stroke="#42aaff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 11.5L12 4l9 7.5"/>
        <path d="M5 10v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8"/>
        <path d="M9 22V12h6v10"/>
      </svg>
    </button>
  </div>
  <div class="hud-center">
    <div class="profile-area" title="Meu Perfil">
      <img src="Áreas (6).png" alt="Meu Perfil" class="profile-img" />
      <span class="profile-name">Luís Correia</span>
    </div>
  </div>
  <div class="hud-right"></div>
</div>
<div class="trofeus-container">
  <div class="trofeus-header">
    <span class="trofeus-title">Troféus desbloqueados e ocultos</span>
    <span class="contador-trofeus">
      <span id="count-desbloq">0</span> desbloqueado(s) &middot;
      <span id="count-ocultos">0</span> oculto(s)
    </span>
  </div>
  <form class="trofeu-busca-wrap" onsubmit="return false;" autocomplete="off" role="search" aria-label="Procurar troféus">
    <input class="trofeu-busca-input" id="buscaTrof" type="search" placeholder="Procurar troféu pelo nome ou descrição…" aria-label="Pesquisar troféus" />
    <span class="trofeu-busca-icone" aria-hidden="true"><svg width="21" height="21" viewBox="0 0 20 20"><circle cx="8.7" cy="8.7" r="7.2" stroke="#42aaff" stroke-width="2" fill="none"/><path d="M15.3 15.3l3.5 3.5" stroke="#42aaff" stroke-width="2" fill="none" stroke-linecap="round"/></svg></span>
  </form>
  <div class="trofeus-filtros" aria-label="Filtro por tipo de troféu">
    <label class="trofeu-toggle" data-cor="ouro">
      <input type="checkbox" class="filtro-tipo" value="trofeu-ouro" checked aria-checked="true">
      <span class="filtro-visu"><span class="icon"><svg width="16" height="16" viewBox="0 0 20 20" fill="#FFD700"><circle cx="10" cy="10" r="7"/><circle cx="10" cy="10" r="4" fill="#fffbe6"/></svg></span>Ouro</span>
    </label>
    <label class="trofeu-toggle" data-cor="prata">
      <input type="checkbox" class="filtro-tipo" value="trofeu-prata" checked aria-checked="true">
      <span class="filtro-visu"><span class="icon"><svg width="16" height="16" viewBox="0 0 20 20" fill="#C0C0C0"><circle cx="10" cy="10" r="7"/><circle cx="10" cy="10" r="4" fill="#f3f3f3"/></svg></span>Prata</span>
    </label>
    <label class="trofeu-toggle" data-cor="bronze">
      <input type="checkbox" class="filtro-tipo" value="trofeu-bronze" checked aria-checked="true">
      <span class="filtro-visu"><span class="icon"><svg width="16" height="16" viewBox="0 0 20 20" fill="#cd7f32"><circle cx="10" cy="10" r="7"/><circle cx="10" cy="10" r="4" fill="#ffd39b"/></svg></span>Bronze</span>
    </label>
    <label class="trofeu-toggle" data-cor="lendario">
      <input type="checkbox" class="filtro-tipo" value="trofeu-lendario" checked aria-checked="true">
      <span class="filtro-visu"><span class="icon"><svg width="16" height="16" viewBox="0 0 20 20"><defs><radialGradient id="lendgrad" cx="50%" cy="47%" r="60%"><stop offset="0%" stop-color="#e2eafd"/><stop offset="60%" stop-color="#a3d1fe"/><stop offset="100%" stop-color="#4db6ff"/></radialGradient></defs><circle cx="10" cy="10" r="7" fill="url(#lendgrad)"/><circle cx="10" cy="10" r="4" fill="#bdbfff"/></svg></span>Lendário</span>
    </label>
    <label class="trofeu-toggle" data-cor="oculto">
      <input type="checkbox" class="filtro-tipo" value="trofeu-oculto" checked aria-checked="true">
      <span class="filtro-visu"><span class="icon"><svg width="16" height="16" viewBox="0 0 20 20" fill="#777"><circle cx="10" cy="10" r="7"/><circle cx="10" cy="10" r="4" fill="#232323"/></svg></span>Oculto</span>
    </label>
    <div class="trofeus-ordenar-wrap">
      <label style="display:flex;align-items:center;gap:7px;font-size:1em;color:#d7eeff;font-weight:500;">
        <svg height="19" width="19" viewBox="0 0 24 24" style="vertical-align:-4px;margin-right:1px"><path d="M14,6 L14,19 M14,19 L10,15 M14,19 L18,15" fill="none" stroke="#49bcff" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/><rect x="4" y="5" width="4" height="4" rx="2" fill="#FFD700"/><rect x="4" y="10" width="4" height="4" rx="2" fill="#C0C0C0"/><rect x="4" y="15" width="4" height="4" rx="2" fill="#cd7f32"/></svg>
        <select id="trofeu-ordenar" class="trofeu-ordenar-select">
          <option value="default">Ordem: original</option>
          <option value="dataDesc">Data (mais recente)</option>
          <option value="dataAsc">Data (mais antiga)</option>
          <option value="nomeA">Nome (A-Z)</option>
          <option value="nomeZ">Nome (Z-A)</option>
          <option value="raridade">Raridade</option>
          <option value="alcançado">Desbloqueados primeiro</option>
        </select>
      </label>
    </div>
  </div>
  <div class="trofeu-vazio-msg" id="msgVazio" aria-live="polite">Nenhum troféu deste tipo por mostrar.</div>
  <div class="trofeu-lista" id="lista-trofeus">
    <!-- Troféu Lendário sempre primeiro! -->
    <div class="trofeu-card trofeu-lendario" tabindex="0" data-tipo="desbloqueado" data-img="https://images.unsplash.com/photo-1508873699372-7aeab60b44c9" data-desc="Lendário! Todos os troféus obtidos. Parabéns, campeão da platina.">
      <div class="trofeu-icone">
        <svg viewBox="0 0 60 81" aria-label="Troféu Lendário">
          <defs>
            <radialGradient id="gradLendario" cx="50%" cy="45%" r="60%">
              <stop offset="0%" stop-color="#e2eafd"/>
              <stop offset="60%" stop-color="#a3d1fe"/>
              <stop offset="100%" stop-color="#4db6ff"/>
            </radialGradient>
          </defs>
          <ellipse cx="30" cy="70" rx="12" ry="5" fill="#bdbfff" stroke="#7b3fbf" stroke-width="1.3"/>
          <rect x="28" y="22" width="4" height="48" rx="2" fill="#bdbfff" stroke="#6fabff" stroke-width="1.2"/>
          <path d="M17.5,23 Q10,36 18,46 Q22,52 23,70" stroke="#b1d7fd" stroke-width="2.8" fill="none"/>
          <path d="M42.5,23 Q50,36 42,46 Q38,52 37,70" stroke="#b1d7fd" stroke-width="2.8" fill="none"/>
          <ellipse cx="30" cy="20" rx="12" ry="9" fill="url(#gradLendario)" stroke="#6fabff" stroke-width="2"/>
          <path d="M18,23 Q15,43 30,52 Q45,43 42,23 Z" fill="url(#gradLendario)" stroke="#445cb3" stroke-width="2"/>
          <polygon
            points="30,4 31.3,8 35.5,8.2 32,10.5 33.3,15 30,12.4 26.7,15 28,10.5 24.5,8.2 28.7,8"
            fill="url(#gradLendario)" stroke="#6fabff" stroke-width="1"/>
        </svg>
      </div>
      <div class="trofeu-nome">Troféu Lendário</div>
      <div class="trofeu-data">2028</div>
      <div class="trofeu-desc">Troféu máximo da jornada!</div>
    </div>
    <!-- Troféu Ouro -->
    <div class="trofeu-card trofeu-ouro" tabindex="0" data-tipo="desbloqueado" data-img="https://images.unsplash.com/photo-1506744038136-46273834b3fb" data-desc="Ganhaste o troféu mais dourado do perfil!">
      <div class="trofeu-icone">
        <svg viewBox="0 0 60 75" aria-label="Troféu Ouro">
          <ellipse cx="30" cy="70" rx="12" ry="5" fill="#fffbe6" stroke="#FFD700" stroke-width="1.3"/>
          <rect x="28" y="22" width="4" height="48" rx="2" fill="#FFD700" stroke="#fff5b0" stroke-width="1.2"/>
          <path d="M17.5,23 Q10,36 18,46 Q22,52 23,70" stroke="#FFD700" stroke-width="2.8" fill="none"/>
          <path d="M42.5,23 Q50,36 42,46 Q38,52 37,70" stroke="#FFD700" stroke-width="2.8" fill="none"/>
          <ellipse cx="30" cy="20" rx="12" ry="9" fill="#FFD700" stroke="#fff5b0" stroke-width="2"/>
          <path d="M18,23 Q15,43 30,52 Q45,43 42,23 Z" fill="#FFD700" stroke="#fff5b0" stroke-width="2"/>
        </svg>
      </div>
      <div class="trofeu-nome">Troféu Ouro</div>
      <div class="trofeu-data">2026</div>
      <div class="trofeu-desc">Excelência e destaque — Ouro</div>
    </div>
    <!-- Troféu Prata -->
    <div class="trofeu-card trofeu-prata" tabindex="0" data-tipo="desbloqueado" data-img="https://images.unsplash.com/photo-1465101046530-73398c7f28ca" data-desc="Prémio de prata, incrível percurso.">
      <div class="trofeu-icone">
        <svg viewBox="0 0 60 75" aria-label="Troféu Prata">
          <ellipse cx="30" cy="70" rx="12" ry="5" fill="#f3f3f3" stroke="#C0C0C0" stroke-width="1.3"/>
          <rect x="28" y="22" width="4" height="48" rx="2" fill="#C0C0C0" stroke="#e8e8e8" stroke-width="1.2"/>
          <path d="M17.5,23 Q10,36 18,46 Q22,52 23,70" stroke="#e8e8e8" stroke-width="2.8" fill="none"/>
          <path d="M42.5,23 Q50,36 42,46 Q38,52 37,70" stroke="#e8e8e8" stroke-width="2.8" fill="none"/>
          <ellipse cx="30" cy="20" rx="12" ry="9" fill="#C0C0C0" stroke="#e8e8e8" stroke-width="2"/>
          <path d="M18,23 Q15,43 30,52 Q45,43 42,23 Z" fill="#C0C0C0" stroke="#e8e8e8" stroke-width="2"/>
        </svg>
      </div>
      <div class="trofeu-nome">Troféu Prata</div>
      <div class="trofeu-data">2024</div>
      <div class="trofeu-desc">Conquista valiosa de Prata</div>
    </div>
    <!-- Troféu Bronze -->
    <div class="trofeu-card trofeu-bronze" tabindex="0" data-tipo="desbloqueado" data-img="https://images.unsplash.com/photo-1465101178521-c1a9136a3cd7" data-desc="Bronze: início das tuas grandes conquistas.">
      <div class="trofeu-icone">
        <svg viewBox="0 0 60 75" aria-label="Troféu Bronze">
          <ellipse cx="30" cy="70" rx="12" ry="5" fill="#ffd39b" stroke="#cd7f32" stroke-width="1.3"/>
          <rect x="28" y="22" width="4" height="48" rx="2" fill="#cd7f32" stroke="#ffd39b" stroke-width="1.2"/>
          <path d="M17.5,23 Q10,36 18,46 Q22,52 23,70" stroke="#ffd39b" stroke-width="2.8" fill="none"/>
          <path d="M42.5,23 Q50,36 42,46 Q38,52 37,70" stroke="#ffd39b" stroke-width="2.8" fill="none"/>
          <ellipse cx="30" cy="20" rx="12" ry="9" fill="#cd7f32" stroke="#ffd39b" stroke-width="2"/>
          <path d="M18,23 Q15,43 30,52 Q45,43 42,23 Z" fill="#cd7f32" stroke="#ffd39b" stroke-width="2"/>
        </svg>
      </div>
      <div class="trofeu-nome">Troféu Bronze</div>
      <div class="trofeu-data">2023</div>
      <div class="trofeu-desc">Primeira conquistas — Bronze</div>
    </div>
    <!-- Troféu Oculto -->
    <div class="trofeu-card trofeu-oculto" tabindex="0" data-tipo="oculto" data-img="https://images.unsplash.com/photo-1519121784515-796c0eaf22c8" data-desc="Descobre os segredos destes troféus ocultos...">
      <div class="trofeu-icone">
        <svg viewBox="0 0 60 75" aria-label="Troféu Oculto">
          <ellipse cx="30" cy="70" rx="12" ry="5" fill="#999" stroke="#fff" stroke-width="1.3"/>
          <rect x="28" y="22" width="4" height="48" rx="2" fill="#999" stroke="#fff" stroke-width="1.2"/>
          <path d="M17.5,23 Q10,36 18,46 Q22,52 23,70" stroke="#fff" stroke-width="2.8" fill="none"/>
          <path d="M42.5,23 Q50,36 42,46 Q38,52 37,70" stroke="#fff" stroke-width="2.8" fill="none"/>
          <ellipse cx="30" cy="20" rx="12" ry="9" fill="#101010" stroke="#fff" stroke-width="2"/>
          <path d="M18,23 Q15,43 30,52 Q45,43 42,23 Z" fill="#232323" stroke="#fff" stroke-width="2"/>
        </svg>
      </div>
      <div class="trofeu-nome">Troféu Oculto</div>
      <div class="trofeu-data"></div>
      <div class="trofeu-desc">Ainda por descobrir!</div>
    </div>
    <div class="trofeu-card trofeu-oculto" tabindex="0" data-tipo="oculto" data-img="https://images.unsplash.com/photo-1522209171808-9c9945de7c94" data-desc="Serás capaz de desbloquear este desafio?">
      <div class="trofeu-icone">
        <svg viewBox="0 0 60 75" aria-label="Troféu Oculto">
          <ellipse cx="30" cy="70" rx="12" ry="5" fill="#999" stroke="#fff" stroke-width="1.3"/>
          <rect x="28" y="22" width="4" height="48" rx="2" fill="#999" stroke="#fff" stroke-width="1.2"/>
          <path d="M17.5,23 Q10,36 18,46 Q22,52 23,70" stroke="#fff" stroke-width="2.8" fill="none"/>
          <path d="M42.5,23 Q50,36 42,46 Q38,52 37,70" stroke="#fff" stroke-width="2.8" fill="none"/>
          <ellipse cx="30" cy="20" rx="12" ry="9" fill="#101010" stroke="#fff" stroke-width="2"/>
          <path d="M18,23 Q15,43 30,52 Q45,43 42,23 Z" fill="#232323" stroke="#fff" stroke-width="2"/>
        </svg>
      </div>
      <div class="trofeu-nome">Troféu Oculto</div>
      <div class="trofeu-data"></div>
      <div class="trofeu-desc">Continua a explorar...</div>
    </div>
  </div>
  </div>
</div>
<script>
function updateHudTime() {
  const el = document.getElementById('hudTimeDate');
  if (!el) return;
  const now = new Date();
  el.textContent = now.toLocaleDateString('pt-PT', { day: '2-digit', month: '2-digit' }) +
    ' ' + now.toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });
}
setInterval(updateHudTime, 1000); updateHudTime();

const busca = document.getElementById('buscaTrof');
busca.addEventListener('input', atualizarFiltroBusca);

const msgVazio = document.getElementById('msgVazio');
const filtros = document.querySelectorAll('.trofeus-filtros .filtro-tipo');
filtros.forEach(f => f.addEventListener('change', atualizarFiltroBusca));
const elOrdenar = document.getElementById('trofeu-ordenar');
elOrdenar.addEventListener('change', ordenarTrof);

function atualizarContador() {
  const desbloq = document.querySelectorAll('.trofeu-card[data-tipo="desbloqueado"]:not([hidden])').length;
  const ocultos = document.querySelectorAll('.trofeu-card[data-tipo="oculto"]:not([hidden])').length;
  document.getElementById('count-desbloq').textContent = desbloq;
  document.getElementById('count-ocultos').textContent = ocultos;
}

function atualizarFiltroBusca() {
  const ativos = Array.from(filtros).filter(f=>f.checked).map(f=>f.value);
  const termo = busca.value.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
  let algumVisivel = false;
  document.querySelectorAll('.trofeu-card').forEach(card => {
    let okTipo = ativos.some(tipo => card.classList.contains(tipo));
    let nome = (card.getAttribute('data-nome')||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
    let desc = (card.getAttribute('data-desc')||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'');
    let buscaOk = !termo || nome.includes(termo) || desc.includes(termo);
    card.hidden = !(okTipo && buscaOk);
    if (!card.hidden) algumVisivel = true;
  });
  msgVazio.classList.toggle('mostrar', !algumVisivel);
  atualizarContador();
  focusPrimeiroVisivel();
}

function ordenarTrof() {
  const lista = document.getElementById('lista-trofeus');
  let cardsArr = Array.from(lista.children);
  let val = elOrdenar.value;
  if(val==='default'){
    let lends = cardsArr.filter(c=>c.classList.contains('trofeu-lendario'));
    let outros = cardsArr.filter(c=>!c.classList.contains('trofeu-lendario'));
    cardsArr = lends.concat(outros);
  }else if(val==='nomeA'){
    cardsArr.sort((a,b)=>(a.getAttribute('data-nome')||'').localeCompare((b.getAttribute('data-nome')||''), 'pt', {sensitivity:'base'}));
  }else if(val==='nomeZ'){
    cardsArr.sort((a,b)=>(b.getAttribute('data-nome')||'').localeCompare((a.getAttribute('data-nome')||''), 'pt', {sensitivity:'base'}));
  }else if(val==='dataDesc'){
    cardsArr.sort((a,b)=>(parseInt(b.getAttribute('data-data')||'0'))-(parseInt(a.getAttribute('data-data')||'0')));
  }else if(val==='dataAsc'){
    cardsArr.sort((a,b)=>(parseInt(a.getAttribute('data-data')||'0'))-(parseInt(b.getAttribute('data-data')||'0')));
  }else if(val==='raridade'){
    cardsArr.sort((a,b)=>(parseInt(a.getAttribute('data-raridade')||'99'))-(parseInt(b.getAttribute('data-raridade')||'99')));
  }else if(val==='alcançado'){
    cardsArr.sort((a,b)=>{
      const ord = {'desbloqueado':0,'oculto':1};
      return ord[a.getAttribute('data-tipo')] - ord[b.getAttribute('data-tipo')];
    });
  }
  cardsArr.forEach(card=>lista.appendChild(card));
  atualizarFiltroBusca();
}

setTimeout(()=>{
  document.querySelectorAll('.trofeu-card.novo').forEach(card=>{
    card.classList.remove('novo');
  });
},3200);

// Seleção e modais, navegação
const cards = Array.from(document.querySelectorAll('.trofeu-card'));
function visiveis() { return cards.filter(c=>!c.hidden);}
let sel = 0, lockModal = false;
function focusPrimeiroVisivel() {
  let v = visiveis();
  if(v.length) {
    sel = cards.indexOf(v[0]);
    cards.forEach(c=>c.classList.remove("selected"));
    cards[sel].classList.add("selected");
    cards[sel].focus();
  }
}
focusPrimeiroVisivel();

function selectCard(i) {
  if (lockModal) return;
  let v = visiveis();
  if (!v.length) return;
  let idx = v.indexOf(cards[sel]);
  if (idx===-1) idx=0;
  idx = (i + v.length) % v.length;
  cards.forEach(c=>c.classList.remove("selected"));
  sel = cards.indexOf(v[idx]);
  cards[sel].classList.add("selected");
  cards[sel].focus();
  cards[sel].scrollIntoView({behavior:'smooth', block:'nearest', inline:'nearest'});
}
function openModal(idx) {
  if (lockModal) return;
  const c = cards[idx];
  if (c.getAttribute('data-tipo') !== "desbloqueado" || c.hidden) return;
  lockModal = true;
  const nome = c.querySelector('.trofeu-nome')?.innerText || "";
  const desc = c.getAttribute('data-desc') || c.querySelector('.trofeu-desc')?.innerText || "";
  const img = c.getAttribute('data-img') || "";
  const bg = document.createElement('div');
  bg.className = 'trofeu-modal-bg';
  bg.tabIndex = 0;
  bg.innerHTML = `
    <div class="trofeu-modal-card">
      <button class="trofeu-modal-close" title="Fechar">&times;</button>
      <img src="${img}" alt="Imagem do Troféu"/>
      <div class="trofeu-modal-title">${nome}</div>
      <div class="trofeu-modal-desc">${desc}</div>
    </div>
  `;
  document.body.appendChild(bg);
  bg.focus();
  function fechar() {
    bg.remove();
    lockModal = false;
    cards[sel]?.focus();
  }
  bg.querySelector('.trofeu-modal-close').onclick = fechar;
  bg.onclick = e => { if (e.target === bg) fechar(); };
  window.addEventListener('keydown', function handler(ev) {
    if (ev.key === "Escape") { fechar(); window.removeEventListener('keydown', handler);}
  });
}
cards.forEach((card,i) => {
  card.addEventListener('click', ()=>openModal(i));
  card.addEventListener('keydown', e => { if (e.key === "Enter") openModal(i); });
});
window.addEventListener('keydown', function(e) {
  if (lockModal) return;
  let v = visiveis(); if (!v.length) return;
  let idx = v.indexOf(cards[sel]);
  if (e.key === "ArrowRight") { selectCard(idx+1); e.preventDefault(); }
  if (e.key === "ArrowLeft") { selectCard(idx-1); e.preventDefault(); }
  if (e.key === "Enter" && document.activeElement.classList.contains('trofeu-card')) {
    const idx = cards.indexOf(document.activeElement);
    if (idx>-1) openModal(idx);
  }
});
</script>
</body>
</html>
