<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Biblioteca 3D Realista Estilizada</title>
  <style>
    body { margin: 0; overflow: hidden; }
    #info { display: none; } #hud { display: none; }
  </style>
</head>
<body>
<script src="https://unpkg.com/three@0.153.0/build/three.min.js"></script>
<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xfcf9ed);

const camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(0, 14, 46);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// --- Luz Ambiente e Direcional ---
scene.add(new THREE.AmbientLight(0xf7eddc, 0.89));
const sun = new THREE.DirectionalLight(0xffffff, 0.68);
sun.position.set(12,32,20);
scene.add(sun);

// --- FUNÇÕES AUXILIARES ---
// Cria prateleiras num painel base vertical
function criarPrateleiras(x, y, z, largura, altura, nAndares, nPratPorAndar, lateral=false, rotY=0) {
  const profundidadePainel = 0.16;
  const profundidadePrat = 0.7;
  // Painel de fundo
  const painel = new THREE.Mesh(
    new THREE.BoxGeometry(largura, altura, profundidadePainel),
    new THREE.MeshLambertMaterial({color: 0x6c3b16})
  );
  painel.position.set(0, altura/2, 0);
  // Prateleiras empilhadas em "andares"
  const alturaUtil = altura*0.93;
  const alturaAndar = alturaUtil / nAndares;
  for(let a=0;a<nAndares;a++){
    for(let p=1;p<=nPratPorAndar;p++){
      const yPrat = 0.22 + a*alturaAndar + p*(alturaAndar/(nPratPorAndar+1));
      const prat = new THREE.Mesh(
        new THREE.BoxGeometry(largura * 0.98, 0.12, profundidadePrat),
        new THREE.MeshLambertMaterial({color: 0x9d6132})
      );
      prat.position.set(0, yPrat, profundidadePrat/3.2);
      painel.add(prat);
    }
  }
  // Laterais/molduras escuras verticais opcionais
  if(lateral){
    for(const sign of [-1,1]){
      const lat = new THREE.Mesh(
        new THREE.BoxGeometry(0.19, altura, profundidadePainel + profundidadePrat - 0.06),
        new THREE.MeshLambertMaterial({color: 0x3e2313})
      );
      lat.position.set( sign*(largura/2-0.11), altura/2, profundidadePrat/6 );
      painel.add(lat);
    }
  }
  // Grupo global (para rodar e posicionar ao estilo Three.js)
  const grupo = new THREE.Group();
  grupo.add(painel);
  grupo.position.set(x,y,z);
  grupo.rotation.y = rotY;
  scene.add(grupo);
  return grupo;
}

// --- Paredes e prateleiras envolventes ---
// Fundo (grande)
criarPrateleiras(0, 0, -9.18, 17.6, 14.5, 3, 5, true, 0);
// Lateral esquerda
criarPrateleiras(-9.10, 0, 0, 8.3, 14.5, 3, 5, true, Math.PI/2);
// Lateral direita
criarPrateleiras(9.10, 0, 0, 8.3, 14.5, 3, 5, true, -Math.PI/2);

// --- Colunas/pilares altos entre segmentos (fundo) ---
for(const x of [-7.65, -3.8, 0, 3.8, 7.65]){
  const pil = new THREE.Mesh(
    new THREE.CylinderGeometry(0.23, 0.25, 15, 18),
    new THREE.MeshLambertMaterial({color:0x3e2214})
  );
  pil.position.set(x, 7.2, -9.00);
  scene.add(pil);
}

// Mesma ideia (laterais, cada 3.9m, menos colunas pois espaço menor)
for(const sideX of [-9.10,9.10]){
  for(const z of [-3.7,0,3.7]){
    const pil = new THREE.Mesh(
      new THREE.CylinderGeometry(0.2,0.23,15,16),
      new THREE.MeshLambertMaterial({color:0x342113})
    );
    pil.position.set(sideX,7.2,z);
    scene.add(pil);
  }
}

// --- Chão claro ---
const chao = new THREE.Mesh(
  new THREE.BoxGeometry(22,0.2,22),
  new THREE.MeshLambertMaterial({color:0xe8e8df})
);
chao.position.y = -0.1;
scene.add(chao);

// --- Câmara e render loop ---
camera.lookAt(0,7,-9.2);
function animate(){
  renderer.render(scene,camera);
  requestAnimationFrame(animate);
}
animate();
window.addEventListener('resize',()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>

